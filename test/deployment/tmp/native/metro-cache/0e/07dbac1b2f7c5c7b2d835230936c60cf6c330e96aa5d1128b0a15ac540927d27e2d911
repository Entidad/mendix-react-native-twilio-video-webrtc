{"dependencies":[{"name":"@babel/runtime/helpers/extends","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":342,"column":0}}]}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":342,"column":0}}]}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":342,"column":0}}]}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":342,"column":0}}]}},{"name":"invariant","data":{"asyncType":null,"locs":[{"start":{"line":13,"column":18},"end":{"line":13,"column":38}}]}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]);function l(t,n){var o=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(o)return(o=o.call(t)).next.bind(o);if(Array.isArray(t)||(o=u(t))||n&&t&&\"number\"==typeof t.length){o&&(t=o);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function u(t,n){if(t){if(\"string\"==typeof t)return c(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===o&&t.constructor&&(o=t.constructor.name),\"Map\"===o||\"Set\"===o?Array.from(t):\"Arguments\"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?c(t,n):void 0}}function c(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,s=new Array(n);o<n;o++)s[o]=t[o];return s}var h=r(d[4]),f=(function(){function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{viewAreaCoveragePercentThreshold:0};o(this,u),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=t}return s(u,[{key:\"dispose\",value:function(){this._timers.forEach(clearTimeout)}},{key:\"computeViewableItems\",value:function(t,n,o,s,l){var u=this._config,c=u.itemVisiblePercentThreshold,f=u.viewAreaCoveragePercentThreshold,b=null!=f,y=b?f:c;h(null!=y&&null!=c!=(null!=f),'Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold');var w=[];if(0===t)return w;var _=-1,p=l||{first:0,last:t-1},I=p.first,A=p.last;if(A>=t)return console.warn('Invalid render range computing viewability '+JSON.stringify({renderRange:l,itemCount:t})),[];for(var S=I;S<=A;S++){var T=s(S);if(T){var k=T.offset-n,V=k+T.length;if(k<o&&V>0)_=S,v(b,y,k,V,o,T.length)&&w.push(S);else if(_>=0)break}}return w}},{key:\"onUpdate\",value:function(t,n,o,s,l,u,c){var h=this;if((!this._config.waitForInteraction||this._hasInteracted)&&0!==t&&s(0)){var f=[];if(t&&(f=this.computeViewableItems(t,n,o,s,c)),this._viewableIndices.length!==f.length||!this._viewableIndices.every(function(t,n){return t===f[n]}))if(this._viewableIndices=f,this._config.minimumViewTime){var v=setTimeout(function(){h._timers.delete(v),h._onUpdateSync(f,u,l)},this._config.minimumViewTime);this._timers.add(v)}else this._onUpdateSync(f,u,l)}}},{key:\"resetViewableIndices\",value:function(){this._viewableIndices=[]}},{key:\"recordInteraction\",value:function(){this._hasInteracted=!0}},{key:\"_onUpdateSync\",value:function(o,s,u){var c=this;o=o.filter(function(t){return c._viewableIndices.includes(t)});for(var h,f=this._viewableItems,v=new Map(o.map(function(t){var n=u(t,!0);return[n.key,n]})),b=[],y=l(v);!(h=y()).done;){var w=h.value,_=n(w,2),p=_[0],I=_[1];f.has(p)||b.push(I)}for(var A,S=l(f);!(A=S()).done;){var T=A.value,k=n(T,2),V=k[0],M=k[1];v.has(V)||b.push(t({},M,{isViewable:!1}))}b.length>0&&(this._viewableItems=v,s({viewableItems:Array.from(v.values()),changed:b,viewabilityConfig:this._config}))}}]),u})();function v(t,n,o,s,l,u){if(y(o,s,l))return!0;var c=b(o,s,l);return 100*(t?c/l:c/u)>=n}function b(t,n,o){var s=Math.min(n,o)-Math.max(t,0);return Math.max(0,s)}function y(t,n,o){return t>=0&&n<=o&&n>t}m.exports=f});","lineCount":1,"map":[[1,28,11,0],[1,910,13,0],[1,914,13,6,"invariant"],[1,916,13,18,"require"],[1,918,13,25,"d"],[1,920,13,25],[1,924,75,6,"ViewabilityHelper"],[1,938,82,2],[1,947,82,2,"ViewabilityHelper"],[1,951,84,4],[1,955,83,4,"config"],[1,957,84,4,"arguments"],[1,967,84,4,"length"],[1,974,84,4],[1,982,84,4,"undefined"],[1,986,84,4,"arguments"],[1,996,84,4],[1,999,84,4,"arguments"],[1,1009,84,4],[1,1013,83,33,"viewAreaCoveragePercentThreshold"],[1,1046,83,67],[1,1049,84,4,"_classCallCheck"],[1,1051,84,4,"this"],[1,1056,84,4,"ViewabilityHelper"],[1,1059,84,4,"this"],[1,1064,77,2,"_hasInteracted"],[1,1080,77,28],[1,1082,84,4,"this"],[1,1087,78,2,"_timers"],[1,1095,78,25],[1,1099,78,29,"Set"],[1,1103,84,4,"this"],[1,1108,79,2,"_viewableIndices"],[1,1128,84,4,"this"],[1,1133,80,2,"_viewableItems"],[1,1148,80,43],[1,1152,80,47,"Map"],[1,1156,85,4,"this"],[1,1161,85,9,"_config"],[1,1169,85,19,"config"],[1,1204,91,2],[1,1215,95,4,"this"],[1,1220,95,9,"_timers"],[1,1228,95,17,"forEach"],[1,1236,95,25,"clearTimeout"],[1,1286,101,2],[1,1295,102,4,"itemCount"],[1,1297,103,4,"scrollOffset"],[1,1299,104,4,"viewportHeight"],[1,1301,105,4,"getFrameMetrics"],[1,1303,113,4,"renderRange"],[1,1306,119,4],[1,1310,119,4,"_this$_config"],[1,1312,122,8,"this"],[1,1317,122,13,"_config"],[1,1325,120,6,"itemVisiblePercentThreshold"],[1,1327,119,4,"_this$_config"],[1,1329,120,6,"itemVisiblePercentThreshold"],[1,1357,121,6,"viewAreaCoveragePercentThreshold"],[1,1359,119,4,"_this$_config"],[1,1361,121,6,"viewAreaCoveragePercentThreshold"],[1,1394,123,10,"viewAreaMode"],[1,1396,123,61],[1,1402,123,25,"viewAreaCoveragePercentThreshold"],[1,1404,124,10,"viewablePercentThreshold"],[1,1406,124,37,"viewAreaMode"],[1,1408,125,8,"viewAreaCoveragePercentThreshold"],[1,1410,126,8,"itemVisiblePercentThreshold"],[1,1412,127,4,"invariant"],[1,1414,128,34],[1,1420,128,6,"viewablePercentThreshold"],[1,1423,129,40],[1,1429,129,9,"itemVisiblePercentThreshold"],[1,1433,130,47],[1,1439,130,11,"viewAreaCoveragePercentThreshold"],[1,1442,131,6],[1,1533,133,4],[1,1537,133,10,"viewableIndices"],[1,1542,134,4],[1,1545,134,22],[1,1549,134,8,"itemCount"],[1,1551,135,6],[1,1558,135,13,"viewableIndices"],[1,1560,137,4],[1,1564,137,8,"firstVisible"],[1,1567,137,20],[1,1569,138,4,"_ref"],[1,1571,138,26,"renderRange"],[1,1575,138,42,"first"],[1,1581,138,49],[1,1583,138,52,"last"],[1,1588,138,58,"itemCount"],[1,1590,138,70],[1,1593,138,11,"first"],[1,1595,138,4,"_ref"],[1,1597,138,11,"first"],[1,1603,138,18,"last"],[1,1605,138,4,"_ref"],[1,1607,138,18,"last"],[1,1612,139,4],[1,1615,139,8,"last"],[1,1618,139,16,"itemCount"],[1,1620,144,6],[1,1627,140,6,"console"],[1,1635,140,14,"warn"],[1,1640,141,8],[1,1686,142,10,"JSON"],[1,1691,142,15,"stringify"],[1,1702,142,26,"renderRange"],[1,1714,142,26,"renderRange"],[1,1716,142,39,"itemCount"],[1,1726,142,39,"itemCount"],[1,1734,146,4],[1,1738,146,9],[1,1742,146,13,"idx"],[1,1744,146,19,"first"],[1,1746,146,26,"idx"],[1,1749,146,33,"last"],[1,1751,146,39,"idx"],[1,1755,146,46],[1,1756,147,6],[1,1760,147,12,"metrics"],[1,1762,147,22,"getFrameMetrics"],[1,1764,147,38,"idx"],[1,1767,148,6],[1,1770,148,11,"metrics"],[1,1772,148,6],[1,1773,151,6],[1,1777,151,12,"top"],[1,1779,151,18,"metrics"],[1,1781,151,26,"offset"],[1,1788,151,35,"scrollOffset"],[1,1790,152,12,"bottom"],[1,1792,152,21,"top"],[1,1794,152,27,"metrics"],[1,1796,152,35,"length"],[1,1803,153,6],[1,1806,153,10,"top"],[1,1808,153,16,"viewportHeight"],[1,1811,153,34,"bottom"],[1,1813,153,43],[1,1815,154,8,"firstVisible"],[1,1817,154,23,"idx"],[1,1819,156,10,"_isViewable"],[1,1821,157,12,"viewAreaMode"],[1,1823,158,12,"viewablePercentThreshold"],[1,1825,159,12,"top"],[1,1827,160,12,"bottom"],[1,1829,161,12,"viewportHeight"],[1,1831,162,12,"metrics"],[1,1833,162,20,"length"],[1,1842,165,10,"viewableIndices"],[1,1844,165,26,"push"],[1,1849,165,31,"idx"],[1,1857,167,13],[1,1860,167,17,"firstVisible"],[1,1863,167,33],[1,1865,168,8],[1,1872,171,4],[1,1879,171,11,"viewableIndices"],[1,1905,178,2],[1,1914,179,4,"itemCount"],[1,1916,180,4,"scrollOffset"],[1,1918,181,4,"viewportHeight"],[1,1920,182,4,"getFrameMetrics"],[1,1922,189,4,"createViewToken"],[1,1924,190,4,"onViewableItemsChanged"],[1,1926,196,4,"renderRange"],[1,1929,201,10],[1,1933,201,10,"_this"],[1,1935,201,10,"this"],[1,1940,202,4],[1,1945,203,7,"this"],[1,1950,203,12,"_config"],[1,1958,203,20,"waitForInteraction"],[1,1978,203,43,"this"],[1,1983,203,48,"_hasInteracted"],[1,2000,204,20],[1,2004,204,6,"itemCount"],[1,2007,205,7,"getFrameMetrics"],[1,2009,205,23],[1,2012,202,4],[1,2013,209,4],[1,2017,209,8,"viewableIndices"],[1,2022,219,4],[1,2025,210,8,"itemCount"],[1,2029,211,6,"viewableIndices"],[1,2031,211,24,"this"],[1,2036,211,29,"computeViewableItems"],[1,2057,212,8,"itemCount"],[1,2059,213,8,"scrollOffset"],[1,2061,214,8,"viewportHeight"],[1,2063,215,8,"getFrameMetrics"],[1,2065,216,8,"renderRange"],[1,2069,220,6,"this"],[1,2074,220,11,"_viewableIndices"],[1,2091,220,28,"length"],[1,2100,220,39,"viewableIndices"],[1,2102,220,55,"length"],[1,2111,221,6,"this"],[1,2116,221,11,"_viewableIndices"],[1,2133,221,28,"every"],[1,2139,221,34],[1,2148,221,35,"v"],[1,2150,221,38,"ii"],[1,2153,221,34],[1,2160,221,45,"v"],[1,2164,221,51,"viewableIndices"],[1,2166,221,67,"ii"],[1,2171,228,4],[1,2174,227,4,"this"],[1,2179,227,9,"_viewableIndices"],[1,2196,227,28,"viewableIndices"],[1,2198,228,8,"this"],[1,2203,228,13,"_config"],[1,2211,228,21,"minimumViewTime"],[1,2227,228,38],[1,2228,229,6],[1,2232,229,12,"handle"],[1,2234,229,21,"setTimeout"],[1,2245,229,32],[1,2256,233,8,"_this"],[1,2258,233,13,"_timers"],[1,2266,233,21,"delete"],[1,2273,233,28,"handle"],[1,2276,234,8,"_this"],[1,2278,234,13,"_onUpdateSync"],[1,2292,235,10,"viewableIndices"],[1,2294,236,10,"onViewableItemsChanged"],[1,2296,237,10,"createViewToken"],[1,2300,239,9,"this"],[1,2305,239,14,"_config"],[1,2313,239,22,"minimumViewTime"],[1,2330,243,6,"this"],[1,2335,243,11,"_timers"],[1,2343,243,19,"add"],[1,2347,243,23,"handle"],[1,2355,245,6,"this"],[1,2360,245,11,"_onUpdateSync"],[1,2374,246,8,"viewableIndices"],[1,2376,247,8,"onViewableItemsChanged"],[1,2378,248,8,"createViewToken"],[1,2418,256,2],[1,2429,257,4,"this"],[1,2434,257,9,"_viewableIndices"],[1,2487,263,2],[1,2498,264,4,"this"],[1,2503,264,9,"_hasInteracted"],[1,2519,264,26],[1,2550,267,2],[1,2559,268,4,"viewableIndicesToCheck"],[1,2561,269,4,"onViewableItemsChanged"],[1,2563,270,4,"createViewToken"],[1,2566,271,4],[1,2570,271,4,"_this2"],[1,2572,271,4,"this"],[1,2577,273,4,"viewableIndicesToCheck"],[1,2579,273,29,"viewableIndicesToCheck"],[1,2581,273,52,"filter"],[1,2588,273,59],[1,2597,273,59,"ii"],[1,2600,273,61],[1,2607,274,6,"_this2"],[1,2609,274,11,"_viewableIndices"],[1,2626,274,28,"includes"],[1,2635,274,37,"ii"],[1,2640,285,4],[1,2644,276,4],[1,2648,285,4,"_step"],[1,2650,276,10,"prevItems"],[1,2652,276,22,"this"],[1,2657,276,27,"_viewableItems"],[1,2672,277,10,"nextItems"],[1,2674,277,22],[1,2678,277,26,"Map"],[1,2682,278,6,"viewableIndicesToCheck"],[1,2684,278,29,"map"],[1,2688,278,33],[1,2697,278,33,"ii"],[1,2700,279,8],[1,2704,279,14,"viewable"],[1,2706,279,25,"createViewToken"],[1,2708,279,41,"ii"],[1,2711,279,45],[1,2714,280,8],[1,2721,280,16,"viewable"],[1,2723,280,25,"key"],[1,2727,280,30,"viewable"],[1,2733,284,10,"changed"],[1,2738,285,4,"_iterator"],[1,2740,285,4,"_createForOfIteratorHelperLoose"],[1,2742,285,34,"nextItems"],[1,2747,285,4,"_step"],[1,2749,285,4,"_iterator"],[1,2754,285,4,"done"],[1,2760,285,45],[1,2761,285,45],[1,2765,285,45,"_ref2"],[1,2767,285,45,"_step"],[1,2769,285,45,"value"],[1,2775,285,45,"_ref3"],[1,2777,285,45,"_slicedToArray"],[1,2779,285,45,"_ref2"],[1,2781,285,45],[1,2784,285,16,"key"],[1,2786,285,45,"_ref3"],[1,2788,285,45],[1,2791,285,21,"viewable"],[1,2793,285,45,"_ref3"],[1,2795,285,45],[1,2798,286,11,"prevItems"],[1,2800,286,21,"has"],[1,2804,286,25,"key"],[1,2808,287,8,"changed"],[1,2810,287,16,"push"],[1,2815,287,21,"viewable"],[1,2818,290,4],[1,2822,290,4],[1,2826,290,4,"_step2"],[1,2828,290,4,"_iterator2"],[1,2830,290,4,"_createForOfIteratorHelperLoose"],[1,2832,290,34,"prevItems"],[1,2837,290,4,"_step2"],[1,2839,290,4,"_iterator2"],[1,2844,290,4,"done"],[1,2850,290,45],[1,2851,290,45],[1,2855,290,45,"_ref4"],[1,2857,290,45,"_step2"],[1,2859,290,45,"value"],[1,2865,290,45,"_ref5"],[1,2867,290,45,"_slicedToArray"],[1,2869,290,45,"_ref4"],[1,2871,290,45],[1,2874,290,16,"key"],[1,2876,290,45,"_ref5"],[1,2878,290,45],[1,2881,290,21,"viewable"],[1,2883,290,45,"_ref5"],[1,2885,290,45],[1,2888,291,11,"nextItems"],[1,2890,291,21,"has"],[1,2894,291,25,"key"],[1,2898,292,8,"changed"],[1,2900,292,16,"push"],[1,2905,292,8,"_extends"],[1,2910,292,25,"viewable"],[1,2913,292,35,"isViewable"],[1,2925,292,47],[1,2930,295,8,"changed"],[1,2932,295,16,"length"],[1,2939,295,25],[1,2943,296,6,"this"],[1,2948,296,11,"_viewableItems"],[1,2963,296,28,"nextItems"],[1,2965,297,6,"onViewableItemsChanged"],[1,2968,298,8,"viewableItems"],[1,2982,298,23,"Array"],[1,2988,298,29,"from"],[1,2993,298,34,"nextItems"],[1,2995,298,44,"values"],[1,3005,299,8,"changed"],[1,3013,299,8,"changed"],[1,3015,300,8,"viewabilityConfig"],[1,3033,300,27,"this"],[1,3038,300,32,"_config"],[1,3059,306,0],[1,3068,306,9,"_isViewable"],[1,3070,307,2,"viewAreaMode"],[1,3072,308,2,"viewablePercentThreshold"],[1,3074,309,2,"top"],[1,3076,310,2,"bottom"],[1,3078,311,2,"viewportHeight"],[1,3080,312,2,"itemLength"],[1,3083,314,2],[1,3086,314,6,"_isEntirelyVisible"],[1,3088,314,25,"top"],[1,3090,314,30,"bottom"],[1,3092,314,38,"viewportHeight"],[1,3095,315,4],[1,3102,315,11],[1,3104,317,4],[1,3108,317,10,"pixels"],[1,3110,317,19,"_getPixelsVisible"],[1,3112,317,37,"top"],[1,3114,317,42,"bottom"],[1,3116,317,50,"viewportHeight"],[1,3119,320,4],[1,3126,319,6],[1,3131,319,13,"viewAreaMode"],[1,3133,319,28,"pixels"],[1,3135,319,37,"viewportHeight"],[1,3137,319,54,"pixels"],[1,3139,319,63,"itemLength"],[1,3143,320,22,"viewablePercentThreshold"],[1,3145,324,0],[1,3154,324,9,"_getPixelsVisible"],[1,3156,325,2,"top"],[1,3158,326,2,"bottom"],[1,3160,327,2,"viewportHeight"],[1,3163,329,2],[1,3167,329,8,"visibleHeight"],[1,3169,329,24,"Math"],[1,3174,329,29,"min"],[1,3178,329,33,"bottom"],[1,3180,329,41,"viewportHeight"],[1,3183,329,59,"Math"],[1,3188,329,64,"max"],[1,3192,329,68,"top"],[1,3194,329,73],[1,3197,330,2],[1,3204,330,9,"Math"],[1,3209,330,14,"max"],[1,3213,330,18],[1,3215,330,21,"visibleHeight"],[1,3218,333,0],[1,3227,333,9,"_isEntirelyVisible"],[1,3229,334,2,"top"],[1,3231,335,2,"bottom"],[1,3233,336,2,"viewportHeight"],[1,3236,338,2],[1,3243,338,9,"top"],[1,3246,338,16],[1,3249,338,21,"bottom"],[1,3252,338,31,"viewportHeight"],[1,3255,338,49,"bottom"],[1,3257,338,58,"top"],[1,3259,341,0,"module"],[1,3261,341,7,"exports"],[1,3269,341,17,"ViewabilityHelper"]],"functionMap":{"names":["<global>","ViewabilityHelper","constructor","dispose","computeViewableItems","onUpdate","_viewableIndices.every$argument_0","setTimeout$argument_0","resetViewableIndices","recordInteraction","_onUpdateSync","viewableIndicesToCheck.filter$argument_0","viewableIndicesToCheck.map$argument_0","_isViewable","_getPixelsVisible","_isEntirelyVisible"],"mappings":"AAA;AC0E;ECO;GDI;EEK;GFK;EGK;GHuE;EIM;kCC2C,oCD;gCEQ;OFU;GJY;EOK;GPE;EQK;GRE;ESE;2DCM;wCDC;iCEI;OFG;GTsB;CDC;AaE;CbgB;AcE;CdO;AeE;CfM"}},"type":"js/module"}]}