{"dependencies":[{"name":"@babel/runtime/helpers/extends","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":182,"column":0}}]}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":182,"column":0}}]}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0},"end":{"line":182,"column":0}}]}},{"name":"../Utilities/infoLog","data":{"asyncType":null,"locs":[{"start":{"line":13,"column":16},"end":{"line":13,"column":47}}]}},{"name":"invariant","data":{"asyncType":null,"locs":[{"start":{"line":14,"column":18},"end":{"line":14,"column":38}}]}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),u=r(d[1]),s=r(d[2]),n=(r(d[3]),r(d[4])),o=(function(){function o(t){var s=t.onMoreTasks;u(this,o),this._onMoreTasks=s,this._queueStack=[{tasks:[],popable:!1}]}return s(o,[{key:\"enqueue\",value:function(t){this._getCurrentQueue().push(t)}},{key:\"enqueueTasks\",value:function(t){var u=this;t.forEach(function(t){return u.enqueue(t)})}},{key:\"cancelTasks\",value:function(u){this._queueStack=this._queueStack.map(function(s){return t({},s,{tasks:s.tasks.filter(function(t){return-1===u.indexOf(t)})})}).filter(function(t,u){return t.tasks.length>0||0===u})}},{key:\"hasTasksToProcess\",value:function(){return this._getCurrentQueue().length>0}},{key:\"processNext\",value:function(){var t=this._getCurrentQueue();if(t.length){var u=t.shift();try{'object'==typeof u&&u.gen?this._genPromise(u):'object'==typeof u&&u.run?u.run():(n('function'==typeof u,'Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(u,null,2)),u())}catch(t){throw t.message='TaskQueue: Error with task '+(u.name||'')+': '+t.message,t}}}},{key:\"_getCurrentQueue\",value:function(){var t=this._queueStack.length-1,u=this._queueStack[t];return u.popable&&0===u.tasks.length&&this._queueStack.length>1?(this._queueStack.pop(),this._getCurrentQueue()):u.tasks}},{key:\"_genPromise\",value:function(t){var u=this;this._queueStack.push({tasks:[],popable:!1});var s=this._queueStack.length-1,n=this._queueStack[s];t.gen().then(function(){n.popable=!0,u.hasTasksToProcess()&&u._onMoreTasks()}).catch(function(u){throw u.message=\"TaskQueue: Error resolving Promise in task \"+t.name+\": \"+u.message,u}).done()}}]),o})();m.exports=o});","lineCount":1,"map":[[1,28,11,0],[1,75,14,6,"invariant"],[1,78,13,16,"require"],[1,80,13,23,"d"],[1,82,13,23],[1,86,14,18,"require"],[1,88,14,25,"d"],[1,90,14,25],[1,95,44,6,"TaskQueue"],[1,109,52,2],[1,118,52,2,"TaskQueue"],[1,120,52,2,"_ref"],[1,123,52,61],[1,127,52,15,"onMoreTasks"],[1,129,52,61,"_ref"],[1,131,52,15,"onMoreTasks"],[1,143,52,61,"_classCallCheck"],[1,145,52,61,"this"],[1,150,52,61,"TaskQueue"],[1,153,53,4,"this"],[1,158,53,9,"_onMoreTasks"],[1,171,53,24,"onMoreTasks"],[1,173,54,4,"this"],[1,178,54,9,"_queueStack"],[1,192,54,25,"tasks"],[1,201,54,36,"popable"],[1,210,54,45],[1,247,62,2],[1,256,62,10,"task"],[1,259,63,4,"this"],[1,264,63,9,"_getCurrentQueue"],[1,283,63,28,"push"],[1,288,63,33,"task"],[1,319,66,2],[1,328,66,15,"tasks"],[1,331,66,41],[1,335,66,41,"_this"],[1,337,66,41,"this"],[1,342,67,4,"tasks"],[1,344,67,10,"forEach"],[1,352,67,18],[1,361,67,18,"task"],[1,364,67,22],[1,371,67,26,"_this"],[1,373,67,31,"enqueue"],[1,381,67,39,"task"],[1,413,70,2],[1,422,70,14,"tasksToCancel"],[1,425,72,4,"this"],[1,430,72,9,"_queueStack"],[1,442,72,23,"this"],[1,447,72,28,"_queueStack"],[1,459,73,7,"map"],[1,463,73,11],[1,472,73,11,"queue"],[1,475,73,16],[1,482,73,16,"_extends"],[1,487,74,11,"queue"],[1,490,75,8,"tasks"],[1,496,75,15,"queue"],[1,498,75,21,"tasks"],[1,504,75,27,"filter"],[1,511,75,34],[1,520,75,34,"task"],[1,523,75,38],[1,530,75,42],[1,534,75,42,"tasksToCancel"],[1,536,75,56,"indexOf"],[1,544,75,64,"task"],[1,553,77,7,"filter"],[1,560,77,14],[1,569,77,15,"queue"],[1,571,77,22,"idx"],[1,574,77,14],[1,581,77,30,"queue"],[1,583,77,36,"tasks"],[1,589,77,42,"length"],[1,596,77,51],[1,599,77,64],[1,603,77,56,"idx"],[1,640,90,2],[1,651,91,4],[1,658,91,11,"this"],[1,663,91,16,"_getCurrentQueue"],[1,682,91,35,"length"],[1,689,91,44],[1,718,97,2],[1,729,98,4],[1,733,98,10,"queue"],[1,735,98,18,"this"],[1,740,98,23,"_getCurrentQueue"],[1,759,99,4],[1,762,99,8,"queue"],[1,764,99,14,"length"],[1,771,99,22],[1,772,100,6],[1,776,100,12,"task"],[1,778,100,19,"queue"],[1,780,100,25,"shift"],[1,788,101,6],[1,792,102,28],[1,809,102,19,"task"],[1,812,102,40,"task"],[1,814,102,45,"gen"],[1,818,104,10,"this"],[1,823,104,15,"_genPromise"],[1,835,104,27,"task"],[1,838,105,35],[1,855,105,26,"task"],[1,858,105,47,"task"],[1,860,105,52,"run"],[1,864,107,10,"task"],[1,866,107,15,"run"],[1,873,109,10,"invariant"],[1,875,110,28],[1,894,110,19,"task"],[1,896,111,12],[1,956,112,14,"JSON"],[1,961,112,19,"stringify"],[1,971,112,29,"task"],[1,973,112,35],[1,978,112,41],[1,982,115,10,"task"],[1,987,117,8],[1,993,117,15,"e"],[1,996,120,8],[1,1002,118,8,"e"],[1,1004,118,10,"message"],[1,1012,119,10],[1,1043,119,43,"task"],[1,1045,119,48,"name"],[1,1051,119,56],[1,1055,119,62],[1,1060,119,69,"e"],[1,1062,119,71,"message"],[1,1070,120,14,"e"],[1,1106,132,2],[1,1117,133,4],[1,1121,133,10,"stackIdx"],[1,1123,133,21,"this"],[1,1128,133,26,"_queueStack"],[1,1140,133,38,"length"],[1,1147,133,47],[1,1149,134,10,"queue"],[1,1151,134,18,"this"],[1,1156,134,23,"_queueStack"],[1,1168,134,35,"stackIdx"],[1,1171,135,4],[1,1178,136,6,"queue"],[1,1180,136,12,"popable"],[1,1189,137,29],[1,1193,137,6,"queue"],[1,1195,137,12,"tasks"],[1,1201,137,18,"length"],[1,1209,138,6,"this"],[1,1214,138,11,"_queueStack"],[1,1226,138,23,"length"],[1,1233,138,32],[1,1236,140,6,"this"],[1,1241,140,11,"_queueStack"],[1,1253,140,23,"pop"],[1,1259,146,13,"this"],[1,1264,146,18,"_getCurrentQueue"],[1,1284,148,13,"queue"],[1,1286,148,19,"tasks"],[1,1319,152,2],[1,1328,152,14,"task"],[1,1331,152,33],[1,1335,152,33,"_this2"],[1,1337,152,33,"this"],[1,1342,157,4,"this"],[1,1347,157,9,"_queueStack"],[1,1359,157,21,"push"],[1,1365,157,27,"tasks"],[1,1374,157,38,"popable"],[1,1383,157,47],[1,1387,158,4],[1,1391,158,10,"stackIdx"],[1,1393,158,21,"this"],[1,1398,158,26,"_queueStack"],[1,1410,158,38,"length"],[1,1417,158,47],[1,1419,159,10,"stackItem"],[1,1421,159,22,"this"],[1,1426,159,27,"_queueStack"],[1,1438,159,39,"stackIdx"],[1,1441,162,4,"task"],[1,1443,163,7,"gen"],[1,1449,164,7,"then"],[1,1454,164,12],[1,1465,170,8,"stackItem"],[1,1467,170,18,"popable"],[1,1476,170,28],[1,1478,171,8,"_this2"],[1,1480,171,13,"hasTasksToProcess"],[1,1501,171,36,"_this2"],[1,1503,171,41,"_onMoreTasks"],[1,1520,173,7,"catch"],[1,1526,173,13],[1,1535,173,13,"ex"],[1,1538,175,8],[1,1544,174,8,"ex"],[1,1546,174,11,"message"],[1,1554,174,8],[1,1600,174,67,"task"],[1,1602,174,72,"name"],[1,1607,174,8],[1,1612,174,81,"ex"],[1,1614,174,84,"message"],[1,1622,175,14,"ex"],[1,1626,177,7,"done"],[1,1643,181,0,"module"],[1,1645,181,7,"exports"],[1,1653,181,17,"TaskQueue"]],"functionMap":{"names":["<global>","TaskQueue","constructor","enqueue","enqueueTasks","tasks.forEach$argument_0","cancelTasks","_queueStack.map$argument_0","queue.tasks.filter$argument_0","_queueStack.map.filter$argument_0","hasTasksToProcess","processNext","_getCurrentQueue","_genPromise","task.gen.then$argument_0","task.gen.then._catch$argument_0"],"mappings":"AAA;AC2C;ECQ;GDG;EEO;GFE;EGE;kBCC,0BD;GHC;EKE;WCG;kCCE,0CD;QDC;cGC,mDH;GLC;ESY;GTE;EUK;GV0B;EWS;GXkB;EYE;YCY;ODQ;aEC;OFG;GZE;CDC"}},"type":"js/module"}]}